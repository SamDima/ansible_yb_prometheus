global:
  scrape_interval: 5s
  evaluation_interval: 5s

scrape_configs:
  - job_name: "prometheus"
    static_configs:
      - targets: ["localhost:9090"]

  - job_name: "node_exporter_local"
    static_configs:
      - targets: ["localhost:9100"]

  - job_name: "node_exporter_argentina"
    static_configs:
      - targets:
{% for host in groups['argentina'] %}
          - "{{ hostvars[host].ansible_host }}:9100"
{% endfor %}

  - job_name: "yugabyte_tserver_argentina"
    metrics_path: "/prometheus-metrics"
    static_configs:
      - targets:
{% for host in groups['argentina'] %}
          - "{{ hostvars[host].ansible_host }}:9000"
{% endfor %}